var W=Object.defineProperty,P=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var S=(s,i,c)=>i in s?W(s,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[i]=c,z=(s,i)=>{for(var c in i||(i={}))Z.call(i,c)&&S(s,c,i[c]);if(F)for(var c of F(i))I.call(i,c)&&S(s,c,i[c]);return s},N=(s,i)=>P(s,Q(i));import{o as v,c as y,a as w,d as O,x as ee,p as T,u as D,g as A,w as h,b as r,f as l,z as L,j as R,L as te,h as E,i as V,F as B,e as g,M as U,k as q,t as ne,O as oe,r as Y,N as se,_ as ue}from"./vendor.9cf30458.js";import{a as ie,b as ae,d as le,s as b,c as de,r as re}from"./index.521760bc.js";const ce={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},pe=w("path",{d:"M10 11H7.101l.001-.009a4.956 4.956 0 0 1 .752-1.787a5.054 5.054 0 0 1 2.2-1.811c.302-.128.617-.226.938-.291a5.078 5.078 0 0 1 2.018 0a4.978 4.978 0 0 1 2.525 1.361l1.416-1.412a7.036 7.036 0 0 0-2.224-1.501a6.921 6.921 0 0 0-1.315-.408a7.079 7.079 0 0 0-2.819 0a6.94 6.94 0 0 0-1.316.409a7.04 7.04 0 0 0-3.08 2.534a6.978 6.978 0 0 0-1.054 2.505c-.028.135-.043.273-.063.41H2l4 4l4-4zm4 2h2.899l-.001.008a4.976 4.976 0 0 1-2.103 3.138a4.943 4.943 0 0 1-1.787.752a5.073 5.073 0 0 1-2.017 0a4.956 4.956 0 0 1-1.787-.752a5.072 5.072 0 0 1-.74-.61L7.05 16.95a7.032 7.032 0 0 0 2.225 1.5c.424.18.867.317 1.315.408a7.07 7.07 0 0 0 2.818 0a7.031 7.031 0 0 0 4.395-2.945a6.974 6.974 0 0 0 1.053-2.503c.027-.135.043-.273.063-.41H22l-4-4l-4 4z",fill:"currentColor"},null,-1),_e=[pe];function fe(s,i){return v(),y("svg",ce,_e)}var ve={name:"bx-bx-refresh",render:fe};const he={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},me=w("path",{d:"M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z",fill:"currentColor"},null,-1),ye=w("path",{d:"M9 10h2v8H9zm4 0h2v8h-2z",fill:"currentColor"},null,-1),we=[me,ye];function be(s,i){return v(),y("svg",he,we)}var G={name:"bx-bx-trash",render:be};const xe={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ge=w("path",{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z",fill:"currentColor"},null,-1),$e=[ge];function ke(s,i){return v(),y("svg",xe,$e)}var Ee={name:"bx-bx-plus",render:ke};const Me=O({props:{node:{required:!0,type:Object},when:{required:!1,type:Boolean}},emits:["update:node"],setup(s,{emit:i}){const c=s,e=ee(!1),x=T(()=>{var p;return((p=c.node)==null?void 0:p.creator)?[{label:"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430",key:"option"}]:[{label:"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430",key:"option"},{label:"\u0412\u043E\u043F\u0440\u043E\u0441",key:"node"}]}),u=D(c,"node",i),a=p=>{u.value.options&&(p==="option"?ie(u.value,c.when):p==="node"&&ae(u.value,c.when),e.value=!1)};return(p,d)=>{const t=Ee,o=L,_=R,n=te;return v(),A(n,{trigger:"click",options:l(x),onSelect:a},{default:h(()=>[r(_,{type:"primary",onClick:d[0]||(d[0]=f=>e.value=!0)},{icon:h(()=>[r(o,null,{default:h(()=>[r(t)]),_:1})]),_:1})]),_:1},8,["options"])}}}),Ce={key:0,class:"flex"},je={class:"w-full"},Ae=g(" \u0414\u0430 "),He=g(" \u041D\u0435\u0442 "),Oe=O({props:{node:{required:!0,type:Object},option:{required:!0,type:Object}},emits:["update:option","delete:option","delete:node"],setup(s,{emit:i}){const e=D(s,"option",i);return(x,u)=>{const a=R,p=U,d=G,t=L,o=q,_=X;return v(),y(B,null,[s.option.type==="option"?(v(),y("div",Ce,[w("div",je,[r(o,null,{default:h(()=>[r(a,{dashed:"",type:l(e).when?"info":"default",onClick:u[0]||(u[0]=n=>l(e).when=!0)},{default:h(()=>[Ae]),_:1},8,["type"]),r(a,{dashed:"",type:l(e).when?"default":"info",onClick:u[1]||(u[1]=n=>l(e).when=!1)},{default:h(()=>[He]),_:1},8,["type"]),r(p,{value:l(e).title,"onUpdate:value":u[2]||(u[2]=n=>l(e).title=n),type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0446\u0438\u044E"},null,8,["value"]),r(a,{ghost:"",onClick:u[3]||(u[3]=n=>i("delete:option",s.option))},{icon:h(()=>[r(t,null,{default:h(()=>[r(d)]),_:1})]),_:1})]),_:1})])])):E("",!0),s.option.type==="node"?(v(),A(_,{key:1,node:l(e),"onUpdate:node":u[4]||(u[4]=n=>V(e)?e.value=n:null),parent:s.node,"onDelete:node":u[5]||(u[5]=n=>i("delete:node",l(e),s.node))},null,8,["node","parent"])):E("",!0)],64)}}});const Re={class:"ec-node rounded-lg"},Be={key:0,class:"bg-gray-100 text-gray-700 font-bold px-4 py-1 select-none rounded-md grid place-items-center"},De=g(" \u0414\u0430 "),Le=g(" \u041D\u0435\u0442 "),Ue=w("div",{class:"flex justify-center"},[w("div",{class:"w-0.5 h-full bg-gray-200"})],-1),Fe={key:1,class:"space-y-2 mt-2 pb-4"},X=O({props:{node:{required:!0,type:Object},parent:{required:!1,type:Object,default:null},isFirst:{required:!1,type:Boolean}},emits:["update:node","delete:node"],setup(s,{emit:i}){const c=s,e=D(c,"node",i),x=T(()=>e.value.creator?`${e.value.creator}.${e.value.id}`:e.value.id),u=p=>{e.value.options=le(c.node,p)},a=(p,d)=>{i("delete:node",p,d)};return(p,d)=>{const t=R,o=U,_=G,n=L,f=Me,$=q,k=Oe;return v(),y("div",Re,[s.isFirst?(v(),y("div",Be,ne(l(x)),1)):E("",!0),w("div",{class:oe(["w-full",{"col-span-2":!s.isFirst}])},[r($,null,{default:h(()=>[s.isFirst?E("",!0):(v(),y(B,{key:0},[r(t,{dashed:"",type:l(e).when?"info":"default",onClick:d[0]||(d[0]=m=>l(e).when=!0)},{default:h(()=>[De]),_:1},8,["type"]),r(t,{dashed:"",type:l(e).when?"default":"info",onClick:d[1]||(d[1]=m=>l(e).when=!1)},{default:h(()=>[Le]),_:1},8,["type"])],64)),r(o,{value:l(e).title,"onUpdate:value":d[2]||(d[2]=m=>l(e).title=m),type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u043E\u043F\u0440\u043E\u0441"},null,8,["value"]),r(t,{ghost:"",onClick:d[3]||(d[3]=m=>a(l(e),s.parent))},{icon:h(()=>[r(n,null,{default:h(()=>[r(_)]),_:1})]),_:1}),r(f,{node:l(e),"onUpdate:node":d[4]||(d[4]=m=>V(e)?e.value=m:null),when:!0},null,8,["node"])]),_:1})],2),Ue,l(e).options?(v(),y("div",Fe,[(v(!0),y(B,null,Y(s.node.options,(m,M)=>(v(),A(k,{key:m._id,option:l(e).options[M],"onUpdate:option":C=>l(e).options[M]=C,node:s.node,"onDelete:option":u,"onDelete:node":a},null,8,["option","onUpdate:option","node"]))),128))])):E("",!0)])}}}),Se={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ze=w("path",{d:"M5 21h14a2 2 0 0 0 2-2V8a1 1 0 0 0-.29-.71l-4-4A1 1 0 0 0 16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2zm10-2H9v-5h6zM13 7h-2V5h2zM5 5h2v4h8V5h.59L19 8.41V19h-2v-5a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v5H5z",fill:"currentColor"},null,-1),Ne=[ze];function Te(s,i){return v(),y("svg",Se,Ne)}var Ve={name:"bx-bx-save",render:Te},H=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},J={exports:{}};(function(s,i){(function(c,e){e()})(H,function(){function c(t,o){return typeof o=="undefined"?o={autoBom:!1}:typeof o!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\uFEFF",t],{type:t.type}):t}function e(t,o,_){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){d(n.response,o,_)},n.onerror=function(){console.error("could not download file")},n.send()}function x(t){var o=new XMLHttpRequest;o.open("HEAD",t,!1);try{o.send()}catch(_){}return 200<=o.status&&299>=o.status}function u(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(_){var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(o)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof H=="object"&&H.global===H?H:void 0,p=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!p?function(t,o,_){var n=a.URL||a.webkitURL,f=document.createElement("a");o=o||t.name||"download",f.download=o,f.rel="noopener",typeof t=="string"?(f.href=t,f.origin===location.origin?u(f):x(f.href)?e(t,o,_):u(f,f.target="_blank")):(f.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(f.href)},4e4),setTimeout(function(){u(f)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,_){if(o=o||t.name||"download",typeof t!="string")navigator.msSaveOrOpenBlob(c(t,_),o);else if(x(t))e(t,o,_);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){u(n)})}}:function(t,o,_,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return e(t,o,_);var f=t.type==="application/octet-stream",$=/constructor/i.test(a.HTMLElement)||a.safari,k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||f&&$||p)&&typeof FileReader!="undefined"){var m=new FileReader;m.onloadend=function(){var j=m.result;j=k?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=j:location=j,n=null},m.readAsDataURL(t)}else{var M=a.URL||a.webkitURL,C=M.createObjectURL(t);n?n.location=C:location.href=C,n=null,setTimeout(function(){M.revokeObjectURL(C)},4e4)}});a.saveAs=d.saveAs=d,s.exports=d})})(J);var qe=J.exports,K={};const Ye={class:"w-[980px] px-6 py-8"},Ge={class:"flex justify-between items-center"},Xe=g(" \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0441\u0445\u0435\u043C\u044B "),Je=g(" \u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C "),Ke={class:"mt-6"},We={class:"mt-4"},Pe=g(" \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u043E\u043F\u0440\u043E\u0441 "),Qe=g(" \u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0445\u0435\u043C\u0443 "),Ze=O({setup(s){const i=(u,a)=>{if(!a){b.nodes=b.nodes.filter(p=>p._id!==u._id).map((p,d)=>N(z({},p),{id:d+1}));return}a.options&&(a.options=a.options.filter(p=>p._id!==u._id))},c=()=>{de(b.nodes)},e=()=>{re()},x=()=>{const u=new Blob([JSON.stringify(b)],{type:"application/json"});qe.saveAs(u,`${b.name}.json`)};return(u,a)=>{const p=ue,d=se,t=ve,o=R,_=U,n=X,f=Ve;return v(),y("div",Ye,[w("div",Ge,[r(d,{prefix:"bar",class:"mb-0"},{default:h(()=>[r(p,{type:"primary"},{default:h(()=>[Xe]),_:1})]),_:1}),r(o,{dashed:"",onClick:e},{default:h(()=>[Je,r(t,{class:"ml-2"})]),_:1})]),w("div",Ke,[r(_,{value:l(b).name,"onUpdate:value":a[0]||(a[0]=$=>l(b).name=$),type:"text",placeholder:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",size:"large"},null,8,["value"]),w("div",We,[(v(!0),y(B,null,Y(l(b).nodes,($,k)=>(v(),A(n,{key:$._id,node:l(b).nodes[k],"onUpdate:node":m=>l(b).nodes[k]=m,parent:null,"is-first":"","onDelete:node":i},null,8,["node","onUpdate:node"]))),128))]),r(o,{dashed:"",type:"info",onClick:c},{default:h(()=>[Pe]),_:1}),l(b).nodes.length?(v(),A(o,{key:0,class:"mt-4",block:"",dashed:"",type:"success",onClick:x},{default:h(()=>[r(f),Qe]),_:1})):E("",!0)])])}}});typeof K=="function"&&K(Ze);export{Ze as default};
