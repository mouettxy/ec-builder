import{o as d,c as p,a as c,d as C,u as V,h as s,w as _,f as n,i as b,g,l as B,F as D,Q as F,y as N,_ as k,H as R,e as U,R as L,t as T,x as Y,q as j,b as M}from"./vendor.b23936d7.js";import{_ as q,a as Q,b as G,d as J,u as K,c as P,r as W,s as X,e as Z,f as I,g as ee,h as ne}from"./index.8c75dcb4.js";const te={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},oe=c("path",{d:"M5 21h14a2 2 0 0 0 2-2V8a1 1 0 0 0-.29-.71l-4-4A1 1 0 0 0 16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2zm10-2H9v-5h6zM13 7h-2V5h2zM5 5h2v4h8V5h.59L19 8.41V19h-2v-5a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v5H5z",fill:"currentColor"},null,-1),ue=[oe];function se(t,o){return d(),p("svg",te,ue)}var le={name:"bx-bx-save",render:se};const ae={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},de=c("path",{d:"M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z",fill:"currentColor"},null,-1),ie=c("path",{d:"M9 10h2v8H9zm4 0h2v8h-2z",fill:"currentColor"},null,-1),ce=[de,ie];function _e(t,o){return d(),p("svg",ae,ce)}var O={name:"bx-bx-trash",render:_e};const re={key:0,class:"flex"},pe={class:"w-full"},he=C({props:{node:{required:!0,type:Object},option:{required:!0,type:Object}},emits:["update:option","delete:option","delete:node"],setup(t,{emit:o}){const e=V(t,"option",o);return(y,l)=>{const v=F,a=O,u=N,f=k,x=q,m=S;return d(),p(D,null,[t.option.type==="option"?(d(),p("div",re,[c("div",pe,[s(x,{value:n(e).when,"onUpdate:value":l[2]||(l[2]=i=>n(e).when=i)},{default:_(()=>[s(v,{value:n(e).title,"onUpdate:value":l[0]||(l[0]=i=>n(e).title=i),type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0446\u0438\u044E"},null,8,["value"]),s(f,{ghost:"",onClick:l[1]||(l[1]=i=>o("delete:option",t.option))},{icon:_(()=>[s(u,null,{default:_(()=>[s(a)]),_:1})]),_:1})]),_:1},8,["value"])])])):b("",!0),t.option.type==="node"?(d(),g(m,{key:1,node:n(e),"onUpdate:node":l[3]||(l[3]=i=>B(e)?e.value=i:null),parent:t.node,"onDelete:node":l[4]||(l[4]=i=>o("delete:node",n(e),t.node))},null,8,["node","parent"])):b("",!0)],64)}}}),me={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ve=c("path",{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z",fill:"currentColor"},null,-1),fe=[ve];function xe(t,o){return d(),p("svg",me,fe)}var ye={name:"bx-bx-plus",render:xe};const be=C({props:{node:{required:!0,type:Object},when:{required:!1,type:Boolean}},emits:["update:node"],setup(t,{emit:o}){const h=t,e=R(!1),y=U(()=>{var a;return((a=h.node)==null?void 0:a.creator)?[{label:"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430",key:"option"}]:[{label:"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430",key:"option"},{label:"\u0412\u043E\u043F\u0440\u043E\u0441",key:"node"}]}),l=V(h,"node",o),v=a=>{l.value.options&&(a==="option"?Q(l.value,h.when):a==="node"&&G(l.value,h.when),e.value=!1)};return(a,u)=>{const f=ye,x=N,m=k,i=L;return d(),g(i,{trigger:"click",options:n(y),onSelect:v},{default:_(()=>[s(m,{type:"primary",onClick:u[0]||(u[0]=w=>e.value=!0)},{icon:_(()=>[s(x,null,{default:_(()=>[s(f)]),_:1})]),_:1})]),_:1},8,["options"])}}});const ge={class:"ec-node rounded-lg"},$e={key:0,class:"bg-gray-100 text-gray-700 font-bold px-4 py-1 select-none rounded-md grid place-items-center"},we=c("div",{class:"flex justify-center"},[c("div",{class:"w-0.5 h-full bg-gray-200"})],-1),Ce={key:1,class:"space-y-2 mt-2 pb-4"},S=C({props:{node:{required:!0,type:Object},parent:{required:!1,type:Object,default:null},isFirst:{required:!1,type:Boolean}},emits:["update:node","delete:node"],setup(t,{emit:o}){const h=t,e=V(h,"node",o),y=U(()=>e.value.creator?`${e.value.creator}.${e.value.id}`:e.value.id),l=a=>{e.value.options=J(h.node,a)},v=(a,u)=>{o("delete:node",a,u)};return(a,u)=>{const f=F,x=O,m=N,i=k,w=be,z=q,E=he;return d(),p("div",ge,[t.isFirst?(d(),p("div",$e,T(n(y)),1)):b("",!0),c("div",{class:Y(["w-full",{"col-span-2":!t.isFirst}])},[s(z,{value:n(e).when,"onUpdate:value":u[3]||(u[3]=r=>n(e).when=r),show:!t.isFirst},{default:_(()=>[s(f,{value:n(e).title,"onUpdate:value":u[0]||(u[0]=r=>n(e).title=r),type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u043E\u043F\u0440\u043E\u0441"},null,8,["value"]),s(i,{ghost:"",onClick:u[1]||(u[1]=r=>v(n(e),t.parent))},{icon:_(()=>[s(m,null,{default:_(()=>[s(x)]),_:1})]),_:1}),s(w,{node:n(e),"onUpdate:node":u[2]||(u[2]=r=>B(e)?e.value=r:null),when:!0},null,8,["node"])]),_:1},8,["value","show"])],2),we,n(e).options?(d(),p("div",Ce,[(d(!0),p(D,null,j(t.node.options,(r,$)=>(d(),g(E,{key:r._id,option:n(e).options[$],"onUpdate:option":H=>n(e).options[$]=H,node:t.node,"onDelete:option":l,"onDelete:node":v},null,8,["option","onUpdate:option","node"]))),128))])):b("",!0)])}}}),ke={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Me=c("path",{d:"M10 11H7.101l.001-.009a4.956 4.956 0 0 1 .752-1.787a5.054 5.054 0 0 1 2.2-1.811c.302-.128.617-.226.938-.291a5.078 5.078 0 0 1 2.018 0a4.978 4.978 0 0 1 2.525 1.361l1.416-1.412a7.036 7.036 0 0 0-2.224-1.501a6.921 6.921 0 0 0-1.315-.408a7.079 7.079 0 0 0-2.819 0a6.94 6.94 0 0 0-1.316.409a7.04 7.04 0 0 0-3.08 2.534a6.978 6.978 0 0 0-1.054 2.505c-.028.135-.043.273-.063.41H2l4 4l4-4zm4 2h2.899l-.001.008a4.976 4.976 0 0 1-2.103 3.138a4.943 4.943 0 0 1-1.787.752a5.073 5.073 0 0 1-2.017 0a4.956 4.956 0 0 1-1.787-.752a5.072 5.072 0 0 1-.74-.61L7.05 16.95a7.032 7.032 0 0 0 2.225 1.5c.424.18.867.317 1.315.408a7.07 7.07 0 0 0 2.818 0a7.031 7.031 0 0 0 4.395-2.945a6.974 6.974 0 0 0 1.053-2.503c.027-.135.043-.273.063-.41H22l-4-4l-4 4z",fill:"currentColor"},null,-1),ze=[Me];function Ee(t,o){return d(),p("svg",ke,ze)}var He={name:"bx-bx-refresh",render:Ee},A={};const Ve={class:"w-[980px] mx-auto px-6 py-8"},De={class:"flex justify-between items-center"},Fe=M(" \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0441\u0445\u0435\u043C\u044B "),Ne=M(" \u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C "),Be={class:"mt-6"},Ue={class:"mt-4"},je={class:"flex space-x-4"},qe=M(" \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u043E\u043F\u0440\u043E\u0441 "),Oe=M(" \u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0445\u0435\u043C\u0443 "),Se=C({setup(t){const{schema:o}=K(),h=(a,u)=>ne(a,u),e=()=>P(o.nodes),y=()=>W(),l=()=>X(),v=({file:a})=>Z(a);return(a,u)=>{const f=I,x=He,m=k,i=F,w=S,z=ee,E=le;return d(),p("div",Ve,[c("div",De,[s(f,null,{default:_(()=>[Fe]),_:1}),s(m,{dashed:"",onClick:y},{default:_(()=>[Ne,s(x,{class:"ml-2"})]),_:1})]),c("div",Be,[s(i,{value:n(o).name,"onUpdate:value":u[0]||(u[0]=r=>n(o).name=r),type:"text",placeholder:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",size:"large"},null,8,["value"]),c("div",Ue,[(d(!0),p(D,null,j(n(o).nodes,(r,$)=>(d(),g(w,{key:r._id,node:n(o).nodes[$],"onUpdate:node":H=>n(o).nodes[$]=H,parent:null,"is-first":"","onDelete:node":h},null,8,["node","onUpdate:node"]))),128))]),c("div",je,[s(m,{type:"primary",onClick:e},{default:_(()=>[qe]),_:1}),n(o).nodes.length?b("",!0):(d(),g(z,{key:0,button:"",onFileChange:v}))]),n(o).nodes.length?(d(),g(m,{key:0,class:"mt-4",block:"",dashed:"",type:"success",onClick:l},{default:_(()=>[s(E),Oe]),_:1})):b("",!0)])])}}});typeof A=="function"&&A(Se);export{Se as default};
