import{o as a,c as g,a as h,d as F,u as O,b as d,w as i,e as x,t as S,f as l,g as w,h as b,i as se,_ as V,j as q,k as H,l as R,r as j,F as M,m as re,n as le,p as z,q as U,s as ae,v as A,x as P,y as ie,C as ce,N as de,z as _e,A as pe,B as fe,D as me,E as he,G as ve,H as ye,I as ge,J as xe,K as $e}from"./vendor.08c54f46.js";const we=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))e(u);new MutationObserver(u=>{for(const s of u)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function o(u){const s={};return u.integrity&&(s.integrity=u.integrity),u.referrerpolicy&&(s.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?s.credentials="include":u.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(u){if(u.ep)return;u.ep=!0;const s=o(u);fetch(u.href,s)}};we();const Ce="modulepreload",T={},be="/ec-builder/",J=function(t,o){return!o||o.length===0?t():Promise.all(o.map(e=>{if(e=`${be}${e}`,e in T)return;T[e]=!0;const u=e.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":Ce,u||(c.as="script",c.crossOrigin=""),c.href=e,document.head.appendChild(c),u)return new Promise((k,E)=>{c.addEventListener("load",k),c.addEventListener("error",E)})})).then(()=>t())},ke={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ee=h("path",{d:"M21.706 5.291l-2.999-2.998A.996.996 0 0 0 18 2H6a.996.996 0 0 0-.707.293L2.294 5.291A.994.994 0 0 0 2 5.999V19c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V5.999a.994.994 0 0 0-.294-.708zM6.414 4h11.172l.999.999H5.415L6.414 4zM4 19V6.999h16L20.002 19H4z",fill:"currentColor"},null,-1),Be=h("path",{d:"M15 12H9v-2H7v4h10v-4h-2z",fill:"currentColor"},null,-1),De=[Ee,Be];function Ae(n,t){return a(),g("svg",ke,De)}var Ne={name:"bx-bx-archive",render:Ae};const Fe={class:"flex items-center w-full space-x-6"},Se={class:"block flex-grow whitespace-nowrap font-medium"},Le=x(" \u0414\u0430 "),Me=x(" \u041D\u0435\u0442 "),ze=x(' \u041E\u0442\u0432\u0435\u0442\u044C\u0442\u0435 \u043D\u0430 \u0432\u043E\u043F\u0440\u043E\u0441 \u0432\u044B\u0448\u0435 \u043D\u0430\u0436\u0430\u0432 \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443 "\u0414\u0430" \u0438\u043B\u0438 "\u041D\u0435\u0442" '),Oe=F({props:{node:{required:!0,type:Object}},emits:["update:node"],setup(n,{emit:t}){const e=O(n,"node",t);return(u,s)=>{const c=V,k=q,E=H,f=R,_=W;return a(),g("div",null,[h("div",Fe,[h("h3",Se,[d(c,null,{default:i(()=>[x(S(l(e).title),1)]),_:1})]),d(E,null,{default:i(()=>[d(k,{size:"small",ghost:"",type:l(e).value===!0?"primary":"default",onClick:s[0]||(s[0]=m=>(l(e).value=!0,l(e).answer=""))},{default:i(()=>[Le]),_:1},8,["type"]),d(k,{size:"small",ghost:"",type:l(e).value===!1?"primary":"default",onClick:s[1]||(s[1]=m=>(l(e).value=!1,l(e).answer=""))},{default:i(()=>[Me]),_:1},8,["type"])]),_:1})]),l(e).value===null?(a(),w(f,{key:0,class:"mt-2",type:"info"},{default:i(()=>[ze]),_:1})):b("",!0),d(_,{node:l(e),"onUpdate:node":s[2]||(s[2]=m=>se(e)?e.value=m:null)},null,8,["node"])])}}}),qe={class:"flex flex-col space-y-2"},Pe={class:"space-x-1 flex"},Ie={class:"block"},Ve={class:"block"},W=F({props:{node:{required:!0,type:Object}},emits:["update:node"],setup(n,{emit:t}){const e=O(n,"node",t);return(u,s)=>{const c=re,k=Oe,E=le;return a(),w(E,{value:l(e).answer,"onUpdate:value":s[0]||(s[0]=f=>l(e).answer=f),class:"space-y-2"},{default:i(()=>[h("div",qe,[(a(!0),g(M,null,j(l(e).options,(f,_)=>(a(),g(M,{key:f._id},[f.type==="option"?(a(),g(M,{key:0},[f.when===l(e).value?(a(),w(c,{key:0,checked:!!f.value,value:`${f.computedId} ${f.title}`,name:l(e).title,type:"info",onChange:m=>f.value=m},{default:i(()=>[h("div",Pe,[h("span",Ie,S(f.computedId),1),h("span",Ve,S(f.title),1)])]),_:2},1032,["checked","value","name","onChange"])):b("",!0)],64)):b("",!0),f.type==="node"&&l(e).options?(a(),g(M,{key:1},[f.when===l(e).value?(a(),w(k,{key:0,node:l(e).options[_],"onUpdate:node":m=>l(e).options[_]=m},null,8,["node","onUpdate:node"])):b("",!0)],64)):b("",!0)],64))),128))])]),_:1},8,["value"])}}}),He={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Re=h("path",{d:"M13.293 6.293L7.586 12l5.707 5.707l1.414-1.414L10.414 12l4.293-4.293z",fill:"currentColor"},null,-1),je=[Re];function Ue(n,t){return a(),g("svg",He,je)}var Te={name:"bx-bx-chevron-left",render:Ue};const Je={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},We=h("path",{d:"M10.707 17.707L16.414 12l-5.707-5.707l-1.414 1.414L13.586 12l-4.293 4.293z",fill:"currentColor"},null,-1),Ye=[We];function Ke(n,t){return a(),g("svg",Je,Ye)}var Ge={name:"bx-bx-chevron-right",render:Ke};const Qe={class:"flex items-center space-x-4"},Xe=x(" \u041D\u0430\u0437\u0430\u0434 "),Ze=x(" \u0414\u0430\u043B\u044C\u0448\u0435 "),et=x(" \u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C "),tt=F({props:{current:{required:!0,type:Number},total:{required:!0,type:Number},disabledNext:{required:!1,type:Boolean}},emits:["update:current","click:prev","click:next","click:finish"],setup(n,{emit:t}){const o=n,e=O(o,"current",t),u=z(()=>e.value<o.total),s=z(()=>e.value>1),c=z(()=>e.value===o.total),k=()=>{t("click:finish")},E=()=>{e.value?e.value>=o.total?e.value=o.total:e.value++:e.value=1,t("click:next")},f=()=>{e.value?e.value<=1?e.value=1:e.value--:e.value=1,t("click:prev")};return(_,m)=>{const r=Te,p=q,v=Ge;return a(),g("div",Qe,[l(s)?(a(),w(p,{key:0,dashed:"",type:"default",onClick:f},{default:i(()=>[d(r,{class:"mr-2"}),Xe]),_:1})):b("",!0),l(u)?(a(),w(p,{key:1,disabled:n.disabledNext,type:"primary",onClick:E},{default:i(()=>[Ze,d(v,{class:"ml-2"})]),_:1},8,["disabled"])):b("",!0),l(c)?(a(),w(p,{key:2,disabled:n.disabledNext,type:"primary",onClick:k},{default:i(()=>[et,d(v,{class:"ml-2"})]),_:1},8,["disabled"])):b("",!0)])}}}),ut={class:"flex space-x-4 items-center"},nt={class:"w-[34px] h-[32px] items-center flex justify-center font-medium rounded-full border-gray-200 border-1"},ot=x(" \u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A "),st={class:"pl-12 py-2"},rt=F({props:{step:{required:!1,type:Number,default:0}},setup(n){return(t,o)=>(a(),g("div",null,[h("div",ut,[h("div",nt,[h("span",null,S(n.step),1)]),U(t.$slots,"title",{},()=>[ot])]),h("div",st,[U(t.$slots,"default")])]))}}),$=ae({name:"",nodes:[]}),Et=(n,t)=>{if(n.options)return n.options.filter(o=>o._id!==t._id)},Bt=(n,t)=>{var o;(o=n.options)==null||o.push({_id:A(),type:"option",title:"",when:t})},Dt=(n,t)=>{var o;(o=n.options)==null||o.push({_id:A(),creator:n._id,type:"node",title:"",options:[{_id:A(),title:"",type:"option",when:!0},{_id:A(),title:"",type:"option",when:!1}],when:t})},At=n=>{var o;const t=((o=n[n.length-1])==null?void 0:o.id)||0;n.push({_id:A(),id:t+1,type:"node",title:"",options:[{_id:A(),title:"",type:"option",when:!0},{_id:A(),title:"",type:"option",when:!1}]})},Y=n=>{const t=e=>{e.forEach((u,s)=>{u.id=s+1,u.value=null,u.options&&t(u.options)})},o=e=>{var s;const u=e.computedId||e.id;e.answer="",(s=e.options)==null||s.forEach(c=>{c.computedId=`${u}.${c.id}`,c.type==="node"&&o(c)})};t(n.nodes),n.nodes.forEach(e=>{o(e)})},lt=(n,t)=>{$.name=n.name,$.nodes=n.nodes,t&&Y($)},at=()=>{$.name="",$.nodes=[]};var K={};const it={class:"w-[980px] px-6 py-8"},ct=x(" \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0445\u0435\u043C\u0443 "),dt={key:2},_t={class:"mb-2"},pt=x(" \u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u0434\u043B\u044F \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u043B\u0438 \u043F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0441\u0445\u0435\u043C\u044B \u0432 \u044D\u0442\u0443 \u043E\u0431\u043B\u0430\u0441\u0442\u044C. "),ft={key:3,class:"flex"},mt={class:"flex items-center w-full space-x-6"},ht={class:"block flex-grow whitespace-nowrap font-medium text-lg"},vt=x(" \u0414\u0430 "),yt=x(" \u041D\u0435\u0442 "),gt={key:0},xt=x(' \u041E\u0442\u0432\u0435\u0442\u044C\u0442\u0435 \u043D\u0430 \u0432\u043E\u043F\u0440\u043E\u0441 \u0432\u044B\u0448\u0435 \u043D\u0430\u0436\u0430\u0432 \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443 "\u0414\u0430" \u0438\u043B\u0438 "\u041D\u0435\u0442" '),G=F({setup(n){Y($);const t=P(1),o=P("nofile"),e=P("process"),u=ie(),s=z(()=>$.nodes.length),c=_=>{var r,p;if((r=_.options)==null?void 0:r.some(v=>v.type==="node")){const v=(p=_.options)==null?void 0:p.filter(C=>!(C.type==="option"||C.when!==_.value));return(v==null?void 0:v.length)?v==null?void 0:v.every(C=>C.answer):!!_.answer}return!!_.answer},k=(_,m)=>{const r=[];r.push({text:_,fontSize:20,alignment:"center"}),r.push(" "),r.push(" "),m.forEach(p=>{r.push({text:`${p.question} (${p.questionAnswer})`,fontSize:14,margin:[p.indent,0,0,0]}),r.push({text:`${p.selectedOption}`,fontSize:14,margin:[p.indent+16,4,0,4]})}),window.pdfMake.createPdf({content:r}).download(_)},E=()=>{const _=[],m=(r,p)=>{var C,B;_.push({question:`${r.computedId||`${r.id}.`} ${r.title}`,questionAnswer:r.value?"\u0414\u0430":"\u041D\u0435\u0442",selectedOption:r.answer||"",indent:p}),((C=r.options)==null?void 0:C.some(D=>D.type==="node"))&&((B=r.options)==null||B.forEach(D=>{D.type==="node"&&m(D,p+8)}))};$.nodes.forEach(r=>m(r,0)),t.value=1,u.success("\u0424\u0430\u0439\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D, \u043D\u0430\u0447\u0438\u043D\u0430\u0435\u043C \u0441\u043A\u0430\u0447\u0438\u0432\u0430\u043D\u0438\u0435"),k($.name,_),at()},f=async({file:_})=>{async function m(r){return new Promise((p,v)=>{const C=new FileReader;C.onload=B=>{var D;if(typeof((D=B.target)==null?void 0:D.result)=="string")try{const N=JSON.parse(B.target.result);p(N)}catch(N){v(N)}else v(new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u0440\u043E\u0447\u0438\u0442\u0430\u0442\u044C \u0444\u0430\u0439\u043B"))},C.onerror=B=>v(B),C.readAsText(r)})}if(o.value="loading",_.file)try{const r=await m(_.file);!r.name||!r.nodes?(o.value="nofile",u.warning("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u0430\u0439\u043B")):(o.value="nofile",lt(r,!0),u.success("\u0424\u0430\u0439\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D"))}catch(r){o.value="nofile",u.warning("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u0430\u0439\u043B")}else o.value="nofile",u.warning("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u0430\u0439\u043B")};return(_,m)=>{const r=V,p=de,v=Ne,C=_e,B=pe,D=fe,N=q,Z=H,ee=R,te=W,ue=tt,ne=rt,oe=me;return a(),g("div",it,[l($).name?(a(),w(p,{key:0,prefix:"bar"},{default:i(()=>[d(r,{type:"primary"},{default:i(()=>[x(S(l($).name),1)]),_:1})]),_:1})):(a(),w(p,{key:1,prefix:"bar"},{default:i(()=>[d(r,{type:"primary"},{default:i(()=>[ct]),_:1})]),_:1})),l($).nodes.length?(a(),g("div",ft,[d(oe,{vertical:"",current:t.value,status:l(e)},{default:i(()=>[(a(!0),g(M,null,j(l($).nodes,(y,I)=>(a(),w(ne,{key:y._id,step:y.id},{title:i(()=>[h("div",mt,[h("h3",ht,[d(r,null,{default:i(()=>[x(S(y.title),1)]),_:2},1024)]),y.id&&t.value===y.id?(a(),w(Z,{key:0},{default:i(()=>[d(N,{size:"small",ghost:"",type:y.value===!0?"primary":"default",onClick:L=>(y.value=!0,y.answer="")},{default:i(()=>[vt]),_:2},1032,["type","onClick"]),d(N,{size:"small",ghost:"",type:y.value===!1?"primary":"default",onClick:L=>(y.value=!1,y.answer="")},{default:i(()=>[yt]),_:2},1032,["type","onClick"])]),_:2},1024)):b("",!0)])]),default:i(()=>[d(ce,null,{default:i(()=>[y.id&&t.value===y.id?(a(),g("div",gt,[y.value===null?(a(),w(ee,{key:0,type:"info"},{default:i(()=>[xt]),_:1})):b("",!0),d(te,{node:l($).nodes[I],"onUpdate:node":L=>l($).nodes[I]=L},null,8,["node","onUpdate:node"]),d(ue,{current:t.value,"onUpdate:current":m[0]||(m[0]=L=>t.value=L),"disabled-next":!c(y),class:"mt-4",total:l(s),"onClick:finish":E},null,8,["current","disabled-next","total"])])):b("",!0)]),_:2},1024)]),_:2},1032,["step"]))),128))]),_:1},8,["current","status"])])):(a(),g("div",dt,[l(o)==="nofile"?(a(),w(D,{key:0,accept:"application/json","show-file-list":!1,"on-change":f},{default:i(()=>[d(B,null,{default:i(()=>[h("div",_t,[d(C,{size:"48",depth:3},{default:i(()=>[d(v,{class:"w-48 h-48"})]),_:1})]),d(r,{depth:"2"},{default:i(()=>[pt]),_:1})]),_:1})]),_:1})):b("",!0)]))])}}});typeof K=="function"&&K(G);const $t=[{name:"create",path:"/create",component:()=>J(()=>import("./create.7f962c7a.js"),["assets/create.7f962c7a.js","assets/create.dd5caca8.css","assets/vendor.08c54f46.js"]),props:!0,meta:{header:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0441\u0445\u0435\u043C\u044B"}},{name:"index",path:"/",component:G,props:!0,meta:{header:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430"}},{name:"notFound",path:"/:all(.*)*",component:()=>J(()=>import("./[...all].de66a991.js"),["assets/[...all].de66a991.js","assets/vendor.08c54f46.js"]),props:!0,meta:{header:"\u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430"}}],wt={class:"w-full h-full"},Ct={class:"flex justify-center"},bt=F({setup(n){const t={common:{primaryColor:"#3590f3",primaryColorHover:"#3590f3",primaryColorPressed:"#3590f3",infoColor:"#28c2ff",successColor:"#38b000",errorColor:"#A31621",warningColor:"#F4743B",hoverColor:"#3590f3"}};return(o,e)=>{const u=he("router-view"),s=ye;return a(),w(l(ve),{"theme-overrides":t},{default:i(()=>[h("main",wt,[h("section",Ct,[d(s,null,{default:i(()=>[d(u)]),_:1})])])]),_:1})}}});const Q=ge(bt),X=xe({history:$e("/ec-builder/"),routes:$t});X.beforeEach(n=>{document.title=n.meta.header});Q.use(X);Q.mount("#app");export{Bt as a,Dt as b,At as c,Et as d,at as r,$ as s};
