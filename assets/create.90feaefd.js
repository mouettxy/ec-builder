import{o as a,c,a as r,d as M,z as R,p as B,u as E,g as w,w as i,b as t,f as n,B as H,j as z,O as L,h as $,i as F,F as D,e as x,P as V,k as j,t as T,Q as Y,r as O,N as P,_ as Q}from"./vendor.51bd39f7.js";import{a as G,b as J,d as K,u as W,c as X,r as Z,s as I,e as ee}from"./index.012347db.js";const ne={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},te=r("path",{d:"M10 11H7.101l.001-.009a4.956 4.956 0 0 1 .752-1.787a5.054 5.054 0 0 1 2.2-1.811c.302-.128.617-.226.938-.291a5.078 5.078 0 0 1 2.018 0a4.978 4.978 0 0 1 2.525 1.361l1.416-1.412a7.036 7.036 0 0 0-2.224-1.501a6.921 6.921 0 0 0-1.315-.408a7.079 7.079 0 0 0-2.819 0a6.94 6.94 0 0 0-1.316.409a7.04 7.04 0 0 0-3.08 2.534a6.978 6.978 0 0 0-1.054 2.505c-.028.135-.043.273-.063.41H2l4 4l4-4zm4 2h2.899l-.001.008a4.976 4.976 0 0 1-2.103 3.138a4.943 4.943 0 0 1-1.787.752a5.073 5.073 0 0 1-2.017 0a4.956 4.956 0 0 1-1.787-.752a5.072 5.072 0 0 1-.74-.61L7.05 16.95a7.032 7.032 0 0 0 2.225 1.5c.424.18.867.317 1.315.408a7.07 7.07 0 0 0 2.818 0a7.031 7.031 0 0 0 4.395-2.945a6.974 6.974 0 0 0 1.053-2.503c.027-.135.043-.273.063-.41H22l-4-4l-4 4z",fill:"currentColor"},null,-1),oe=[te];function ue(o,u){return a(),c("svg",ne,oe)}var se={name:"bx-bx-refresh",render:ue};const de={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},le=r("path",{d:"M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z",fill:"currentColor"},null,-1),ae=r("path",{d:"M9 10h2v8H9zm4 0h2v8h-2z",fill:"currentColor"},null,-1),ie=[le,ae];function _e(o,u){return a(),c("svg",de,ie)}var U={name:"bx-bx-trash",render:_e};const ce={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},re=r("path",{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z",fill:"currentColor"},null,-1),pe=[re];function he(o,u){return a(),c("svg",ce,pe)}var me={name:"bx-bx-plus",render:he};const ve=M({props:{node:{required:!0,type:Object},when:{required:!1,type:Boolean}},emits:["update:node"],setup(o,{emit:u}){const m=o,e=R(!1),b=B(()=>{var l;return((l=m.node)==null?void 0:l.creator)?[{label:"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430",key:"option"}]:[{label:"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430",key:"option"},{label:"\u0412\u043E\u043F\u0440\u043E\u0441",key:"node"}]}),s=E(m,"node",u),p=l=>{s.value.options&&(l==="option"?G(s.value,m.when):l==="node"&&J(s.value,m.when),e.value=!1)};return(l,d)=>{const v=me,y=H,f=z,_=L;return a(),w(_,{trigger:"click",options:n(b),onSelect:p},{default:i(()=>[t(f,{type:"primary",onClick:d[0]||(d[0]=k=>e.value=!0)},{icon:i(()=>[t(y,null,{default:i(()=>[t(v)]),_:1})]),_:1})]),_:1},8,["options"])}}}),fe={key:0,class:"flex"},xe={class:"w-full"},ye=x(" \u0414\u0430 "),be=x(" \u041D\u0435\u0442 "),$e=M({props:{node:{required:!0,type:Object},option:{required:!0,type:Object}},emits:["update:option","delete:option","delete:node"],setup(o,{emit:u}){const e=E(o,"option",u);return(b,s)=>{const p=z,l=V,d=U,v=H,y=j,f=q;return a(),c(D,null,[o.option.type==="option"?(a(),c("div",fe,[r("div",xe,[t(y,null,{default:i(()=>[t(p,{dashed:"",type:n(e).when?"info":"default",onClick:s[0]||(s[0]=_=>n(e).when=!0)},{default:i(()=>[ye]),_:1},8,["type"]),t(p,{dashed:"",type:n(e).when?"default":"info",onClick:s[1]||(s[1]=_=>n(e).when=!1)},{default:i(()=>[be]),_:1},8,["type"]),t(l,{value:n(e).title,"onUpdate:value":s[2]||(s[2]=_=>n(e).title=_),type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0446\u0438\u044E"},null,8,["value"]),t(p,{ghost:"",onClick:s[3]||(s[3]=_=>u("delete:option",o.option))},{icon:i(()=>[t(v,null,{default:i(()=>[t(d)]),_:1})]),_:1})]),_:1})])])):$("",!0),o.option.type==="node"?(a(),w(f,{key:1,node:n(e),"onUpdate:node":s[4]||(s[4]=_=>F(e)?e.value=_:null),parent:o.node,"onDelete:node":s[5]||(s[5]=_=>u("delete:node",n(e),o.node))},null,8,["node","parent"])):$("",!0)],64)}}});const ge={class:"ec-node rounded-lg"},we={key:0,class:"bg-gray-100 text-gray-700 font-bold px-4 py-1 select-none rounded-md grid place-items-center"},ke=x(" \u0414\u0430 "),Ce=x(" \u041D\u0435\u0442 "),Me=r("div",{class:"flex justify-center"},[r("div",{class:"w-0.5 h-full bg-gray-200"})],-1),ze={key:1,class:"space-y-2 mt-2 pb-4"},q=M({props:{node:{required:!0,type:Object},parent:{required:!1,type:Object,default:null},isFirst:{required:!1,type:Boolean}},emits:["update:node","delete:node"],setup(o,{emit:u}){const m=o,e=E(m,"node",u),b=B(()=>e.value.creator?`${e.value.creator}.${e.value.id}`:e.value.id),s=l=>{e.value.options=K(m.node,l)},p=(l,d)=>{u("delete:node",l,d)};return(l,d)=>{const v=z,y=V,f=U,_=H,k=ve,N=j,g=$e;return a(),c("div",ge,[o.isFirst?(a(),c("div",we,T(n(b)),1)):$("",!0),r("div",{class:Y(["w-full",{"col-span-2":!o.isFirst}])},[t(N,null,{default:i(()=>[o.isFirst?$("",!0):(a(),c(D,{key:0},[t(v,{dashed:"",type:n(e).when?"info":"default",onClick:d[0]||(d[0]=h=>n(e).when=!0)},{default:i(()=>[ke]),_:1},8,["type"]),t(v,{dashed:"",type:n(e).when?"default":"info",onClick:d[1]||(d[1]=h=>n(e).when=!1)},{default:i(()=>[Ce]),_:1},8,["type"])],64)),t(y,{value:n(e).title,"onUpdate:value":d[2]||(d[2]=h=>n(e).title=h),type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u043E\u043F\u0440\u043E\u0441"},null,8,["value"]),t(v,{ghost:"",onClick:d[3]||(d[3]=h=>p(n(e),o.parent))},{icon:i(()=>[t(_,null,{default:i(()=>[t(f)]),_:1})]),_:1}),t(k,{node:n(e),"onUpdate:node":d[4]||(d[4]=h=>F(e)?e.value=h:null),when:!0},null,8,["node"])]),_:1})],2),Me,n(e).options?(a(),c("div",ze,[(a(!0),c(D,null,O(o.node.options,(h,C)=>(a(),w(g,{key:h._id,option:n(e).options[C],"onUpdate:option":S=>n(e).options[C]=S,node:o.node,"onDelete:option":s,"onDelete:node":p},null,8,["option","onUpdate:option","node"]))),128))])):$("",!0)])}}}),De={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ne=r("path",{d:"M5 21h14a2 2 0 0 0 2-2V8a1 1 0 0 0-.29-.71l-4-4A1 1 0 0 0 16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2zm10-2H9v-5h6zM13 7h-2V5h2zM5 5h2v4h8V5h.59L19 8.41V19h-2v-5a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v5H5z",fill:"currentColor"},null,-1),Ee=[Ne];function He(o,u){return a(),c("svg",De,Ee)}var Ve={name:"bx-bx-save",render:He},A={};const Be={class:"w-[980px] px-6 py-8"},Fe={class:"flex justify-between items-center"},je=x(" \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0441\u0445\u0435\u043C\u044B "),Oe=x(" \u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C "),Ue={class:"mt-6"},qe={class:"mt-4"},Ae=x(" \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u043E\u043F\u0440\u043E\u0441 "),Se=x(" \u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0441\u0445\u0435\u043C\u0443 "),Re=M({setup(o){const{schema:u}=W(),m=(p,l)=>ee(p,l),e=()=>X(u.nodes),b=()=>Z(),s=()=>I();return(p,l)=>{const d=Q,v=P,y=se,f=z,_=V,k=q,N=Ve;return a(),c("div",Be,[r("div",Fe,[t(v,{prefix:"bar",class:"mb-0"},{default:i(()=>[t(d,{type:"primary"},{default:i(()=>[je]),_:1})]),_:1}),t(f,{dashed:"",onClick:b},{default:i(()=>[Oe,t(y,{class:"ml-2"})]),_:1})]),r("div",Ue,[t(_,{value:n(u).name,"onUpdate:value":l[0]||(l[0]=g=>n(u).name=g),type:"text",placeholder:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",size:"large"},null,8,["value"]),r("div",qe,[(a(!0),c(D,null,O(n(u).nodes,(g,h)=>(a(),w(k,{key:g._id,node:n(u).nodes[h],"onUpdate:node":C=>n(u).nodes[h]=C,parent:null,"is-first":"","onDelete:node":m},null,8,["node","onUpdate:node"]))),128))]),t(f,{dashed:"",type:"info",onClick:e},{default:i(()=>[Ae]),_:1}),n(u).nodes.length?(a(),w(f,{key:0,class:"mt-4",block:"",dashed:"",type:"success",onClick:s},{default:i(()=>[t(N),Se]),_:1})):$("",!0)])])}}});typeof A=="function"&&A(Re);export{Re as default};
